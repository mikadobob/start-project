{"version":3,"sources":["assets\\scripts\\Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport class Player extends cc.Component {\r\n\r\n    @property\r\n    jumpHeight: number = 0;\r\n\r\n    @property\r\n    jumpDuration: number = 0;\r\n\r\n    @property\r\n    maxMoveSpeed: number = 0;\r\n\r\n    @property\r\n    accel: number = 0;\r\n\r\n    @property(cc.AudioClip)\r\n    private jumpAudio:cc.AudioClip = null;\r\n\r\n    private accLeft: boolean = false;\r\n    private accRight: boolean = false;\r\n    private xSpeed: number = 0;\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad() {\r\n        // Initialize jump action\r\n        var jumpAction = this.runJumpAction();\r\n        cc.tween(this.node).then(jumpAction).start()\r\n\r\n        // Acceleration direction switch\r\n        this.accLeft = false;\r\n        this.accRight = false;\r\n        // The main character's current horizontal velocity\r\n        this.xSpeed = 0;\r\n\r\n        // Initialize the keyboard input listening\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        // Cancel keyboard input monitoring\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\r\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\r\n    }\r\n\r\n    runJumpAction() {\r\n        // Jump up\r\n        var jumpUp = cc.tween().by(this.jumpDuration, { y: this.jumpHeight }, { easing: 'sineOut' });\r\n        // Jump down\r\n        var jumpDown = cc.tween().by(this.jumpDuration, { y: -this.jumpHeight }, { easing: 'sineIn' });\r\n\r\n        // Create a easing and perform actions in the order of \"jumpUp\", \"jumpDown\"\r\n        var tween = cc.tween().sequence(jumpUp, jumpDown).call(this.playJumpSound, this);\r\n        // Repeat\r\n        return cc.tween().repeatForever(tween);\r\n    }\r\n\r\n    playJumpSound() {\r\n        cc.audioEngine.playEffect(this.jumpAudio, false);\r\n    }\r\n\r\n    onKeyDown(event) {\r\n        // Set a flag when key pressed\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = true;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = true;\r\n                break;\r\n        }\r\n    }\r\n\r\n    onKeyUp(event) {\r\n        // Unset a flag when key released\r\n        switch (event.keyCode) {\r\n            case cc.macro.KEY.a:\r\n                this.accLeft = false;\r\n                break;\r\n            case cc.macro.KEY.d:\r\n                this.accRight = false;\r\n                break;\r\n        }\r\n    }\r\n\r\n    \r\n\r\n    update(dt) {\r\n        // Update speed of each frame according to the current acceleration direction\r\n        if (this.accLeft) {\r\n            this.xSpeed -= this.accel * dt;\r\n        } else if (this.accRight) {\r\n            this.xSpeed += this.accel * dt;\r\n        }\r\n        // Restrict the movement speed of the main character to the maximum movement speed\r\n        if (Math.abs(this.xSpeed) > this.maxMoveSpeed) {\r\n            // If speed reach limit, use max speed with current direction\r\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed / Math.abs(this.xSpeed);\r\n        }\r\n\r\n        // Update the position of the main character according to the current speed\r\n        this.node.x += this.xSpeed * dt;\r\n    }\r\n}\r\n"]}